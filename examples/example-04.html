<!doctype html>
<html>
    <head>
        <meta charset="UTF-8">
        
        <title>Load from RSS Feed</title>
        
        <!-- Include the timeline css -->
        <link rel="stylesheet" href="../css/styles.css"/>
        
        <!-- The Examples css -->
        <link rel="stylesheet" href="css/styles.css"/>
        
        <!-- Timeline JS (requires jQuery) -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
        <script src="../js/timeline.min.js"></script>
        
    </head>
    <body class="example e4">
        <h1>Timeline of Shrewsbury</h1>
        <div class="timeline"></div>
        <script>
            /**
             * This example deonstrates how you can create your own parsing function to 
             * load any shape of events data you wish.
             * 
             * @param {string} url
             * 
             * @returns {void}
             */
            function customLoader(url)
            {
                // Context will be set as `timeline`
                var me = this;
                // Eye candy
                $(me).addClass('loading');
                $.ajax({
                    // Set the data type
                    dataType:'xml',
                    // Success handler
                    success: function(data){
                        // Iterate event items
                        $(data).find('item').each(function(i,v){
                            // Call the public method: addItem to add the event
                            me.addItem({
                                title: $(v).find('title').text(),
                                description: $(v).find('description').text(), 
                                date: {
                                    start:{
                                        year:$(v).find('date[key=start]').attr('year')
                                    }
                                }, 
                                link: $(v).find('link').text(), 
                                keyEvent: Math.random()<=0.5
                            });
                        });
                        // All done so remove the loading hint
                        $(me).removeClass('loading');
                    },
                    url: url
                });
            }
            
            // Create the timeline
            $('.timeline').timeline({
                // Colours cycled based on those provided (rainbow or random).
                colorMode: 'rainbow',
                // Colors for the rainbow cycle
                colors: ['8AC2B8', 'FFE5C1', '002F67'],
                // A custom loadfunction to parse the data being loaded via ajax
                loadFunction: customLoader,
                // The date to start at
                startDate:{
                    year: 1100
                },
                // Main timescales - different scales can be different widths to "zoom" particular time periods of interest
                timescales:[
                    {start: 0,end: 400,width: 200,interval: [100,200,300]},
                    {start: 400,end: 1000,width: 600,interval: [500,600,700,800,900]},
                    {start: 1000,end: 1600,width: 600,interval: [1100,1200,1300,1400,1500]},
                    {start: 1600,end: 2100,width: 800,interval: [1700,1800,1900,2000]},
                ],
                // Time periods
                periods:[
                    {title:'Middle Ages',start: 400, end: 1600,class:'level-1'},
                        {title:'Byzantine era',start: 330, end: 1453,class:'level-2 rotate'},
                        {title:'Dark Ages',start: 476, end: 800,class:'level-2 rotate'},
                        {title:'Early Middle Ages',start: 500, end: 1000,class:'level-2 rotate'},
                            {title:'Viking Age ',start: 793, end: 1066,class:'level-2 rotate'},
                        {title:'High Middle Ages',start: 1000, end: 1300,class:'level-1'},
                        {title:'Late Middle Ages',start: 1300, end: 1450,class:'level-1'},
                            {title:'The Renaissance',start: 1300, end: 1750,class:'level-2 rotate'},
                    {title:'Early Modern Period',start: 1450, end: 1750,class:'level-1'},
                        {title:'Age of Discovery',start: 1400, end: 1700,class:'level-2 rotate'},
                        {title:'Polish Golden Age',start: 1650, end: 1730,class:'level-2 rotate'},
                        {title:'Elizabethan Era',start: 1558, end: 1603,class:'level-2 rotate'},
                        //{title:'Protestant Reformation',start: 1500, end: 1600,class:'level-2 rotate'},
                        {title:'Industrious Revolution',start: 1500, end: 1700,class:'level-2 rotate'},
                        {title:'Jacobean Era',start: 1603, end: 1625,class:'level-2 rotate'},
                    {title:'Long Nineteenth Century',start: 1789, end: 1914,class:'level-1'},
                        {title:'Georgian era',start: 1714, end: 0,class:'level-2 rotate'},
                        {title:'Industrial Revolution',start: 1700, end: 1900,class:'level-2 rotate'},
                        {title:'Romantic era',start: 1770, end: 1850,class:'level-2 rotate'},
                        {title:'Napoleonic era',start: 1799, end: 1815,class:'level-2 rotate'},
                        {title:'Victorian era',start: 1837, end: 1901,class:'level-2 rotate'},
                            {title:'Edwardian era',start: 1901, end: 1910,class:'level-2 rotate'},
                    {title:'Cold War',start: 1950, end: 1991,class:'level-1'},
                    {title:'Post-Cold War',start: 1991, end: 2020,class:'level-1'},
                ],
                src:[
                    'data/proxy.php?url=1'
                ]
            });
        </script>
    </body>
</html>